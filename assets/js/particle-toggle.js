"use strict";function addParticleToggle(){if(!document.getElementById("particles-js"))return;if(document.getElementById("particle-toggle"))return;const e=createToggleButton();document.body.appendChild(e);const t=getParticlesPreference();updateButtonState(e,t),e.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();const n=getParticlesPreference(),i=!n;setParticlesPreference(i),updateParticleState(i,!0),updateButtonState(e,i)})}function createToggleButton(){const e=document.createElement("div");e.id="particle-toggle",e.setAttribute("data-turbo-permanent","");const t=getParticlesPreference();return e.innerHTML=`\n    <i class="ti ti-sparkles"></i>\n    <span class="toggle-text">${t?"Disable":"Enable"} Particles</span>\n  `,e.className=t?"":"particles-off",e.style.cursor="pointer",e.style.pointerEvents="auto",e.title="Toggle Particles",e}function getParticlesPreference(){const e=localStorage.getItem("particles-enabled");return null===e||"true"===e}function setParticlesPreference(e){localStorage.setItem("particles-enabled",e.toString())}function ensurePJSDomArray(){window.pJSDom&&Array.isArray(window.pJSDom)||(window.pJSDom=[])}function cleanupParticles(){const e=document.getElementById("particles-js");if(ensurePJSDomArray(),window.pJSDom.length>0&&window.pJSDom[0])try{const e=window.pJSDom[0].pJS;e&&e.fn&&(e.fn.drawAnimFrame&&cancelAnimationFrame(e.fn.drawAnimFrame),e.fn.checkAnimFrame&&cancelAnimationFrame(e.fn.checkAnimFrame))}catch(e){}e&&(e.innerHTML=""),window.pJSDom=[]}function updateParticleState(e,t){const n=document.getElementById("particles-js");n&&(e?(n.style.opacity="0",n.style.pointerEvents="auto",n.style.transition="",cleanupParticles(),setTimeout(function(){initializeParticles(t)},100)):t?(n.style.transition="opacity 0.3s ease-in-out",n.style.opacity="0",setTimeout(function(){cleanupParticles(),n.style.pointerEvents="none"},350)):(n.style.opacity="0",n.style.pointerEvents="none",cleanupParticles()))}function updateButtonState(e,t){if(!e)return;const n=e.querySelector(".toggle-text");t?(e.className="",e.style.opacity="1",n&&(n.textContent="Disable Particles")):(e.className="particles-off",e.style.opacity="0.5",n&&(n.textContent="Enable Particles")),e.style.pointerEvents="auto"}function initializeParticles(e){const t=document.getElementById("particles-js");t&&void 0!==window.particlesJS&&(ensurePJSDomArray(),t.style.opacity="0",t.style.transition="",window.particlesJS.load("particles-js","/assets/json/particles.json",function(){if(ensurePJSDomArray(),0!==window.pJSDom.length){try{const e=determineComputedTheme(),t=window.pJSDom[0].pJS;if(t&&t.particles){const n=t.particles;"dark"===e?(n.color.value="#ffffff",n.line_linked.color="#ffffff"):(n.color.value="#000000",n.line_linked.color="#000000"),t.fn&&"function"==typeof t.fn.particlesRefresh&&t.fn.particlesRefresh()}}catch(e){}requestAnimationFrame(function(){!1!==e&&(t.style.transition="opacity 2s ease-in"),t.style.opacity="1"})}}))}function safeInit(){document.getElementById("particle-toggle")||addParticleToggle()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",safeInit):safeInit(),document.addEventListener("turbo:load",safeInit);